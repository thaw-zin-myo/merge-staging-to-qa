name: Merge Staging to QA

on:
  pull_request:
    types:
      - closed

jobs:
  merge_to_qa:
    runs-on: ubuntu-latest

    steps:
      - name: Check out code
        uses: actions/checkout@v2

      - name: Merge Staging to QA
        env:
          GITHUB_TOKEN: ${{ secrets.MERGE_TOKEN }}
        run: |
          git config user.name "thawzinmyo"
          git config user.email "thawzinmyo@yomafleet.com"
          git fetch origin qa:qa # Fetch the remote qa branch
          git checkout qa
          git merge staging --allow-unrelated-histories
          git push origin qa






































# name: Merge Staging to QA

# on:
#   pull_request:
#     types:
#       - closed

# jobs:
#   merge_staging_to_feature_qa:
#     runs-on: ubuntu-latest

#     steps:
#       - name: Check out code
#         uses: actions/checkout@v2

#       - name: Merge Staging to QA
#         if: github.event.pull_request.merged == true && github.event.pull_request.base.ref == 'staging'
#         env:
#           GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
#         run: |
#           git config user.name "thawzinmyo"
#           git config user.email "thawzinmyo@yomafleet.com"
#           git checkout staging
#           git pull origin staging
#           git checkout qa
#           git merge staging
#           git push origin qa